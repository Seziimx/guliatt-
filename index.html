<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–†–µ–π—Ç–∏–Ω–≥ –≥–æ—Ä–æ–¥–æ–≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞ ‚Äî —Å—Ç—Ä–∏–º</title>
<style>
  :root{
    --bg:#bec5eb;
    --card:#141617;
    --muted:#9aa0a6;
    --accent:#28a745;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: Inter,system-ui,Segoe UI,Roboto,Arial;
    background:linear-gradient(180deg,#66348b 0%, #ffffff 100%);
    color:#fff;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    padding:14px;
    text-align:center;
  }
  header{margin-bottom:12px}
  h1{font-size:clamp(18px,4.8vw,28px);margin:6px 0}
  .controls{
    display:flex;
    gap:8px;
    justify-content:center;
    flex-wrap:wrap;
    margin-bottom:12px;
  }
  select,input,button{
    border:0;border-radius:10px;
    padding:10px 12px;
    font-size:clamp(13px,3.2vw,16px);
    outline:none;
  }
  select, input{background:var(--card); color:#fff; min-width:180px}
  button{
    background:var(--accent); color:#fff; font-weight:600; cursor:pointer;
    box-shadow:0 4px 14px rgba(40,167,69,0.12);
  }
  button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06); color:var(--muted)}
  button.warn{background:#e04b4b}
  .table-wrap{
    width:100%;
    max-width:900px;
    margin: 0 auto;
    overflow:hidden;
    border-radius:12px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.6);
  }
  table{
    width:100%;
    border-collapse:collapse;
    font-size:clamp(13px,3vw,16px);
  }
  thead th{
    text-align:left;
    padding:12px;
    background:rgba(255,255,255,0.03);
    color:var(--muted);
    font-weight:600;
  }
  tbody tr{background:transparent; transition:transform .15s ease, box-shadow .15s ease;}
  tbody tr:not(.gold):not(.silver):not(.bronze):hover{transform:translateY(-3px); box-shadow:0 6px 18px rgba(0,0,0,0.6)}
  td{padding:12px;border-top:1px solid rgba(255,255,255,0.03); vertical-align:middle}

  .place{
    width:64px; font-weight:700;
    text-align:center;
  }
  .city{
    display:flex; align-items:center; gap:10px;
  }
  .medal{
    display:inline-flex; align-items:center; justify-content:center;
    width:38px; height:38px; border-radius:50%; font-weight:700;
    box-shadow:0 6px 20px rgba(0,0,0,0.5);
  }

  /* shine animations */
  @keyframes shineGold {
    0% { box-shadow:0 0 6px 2px rgba(255,215,0,0.4); transform:translateY(0) }
    50%{ box-shadow:0 0 28px 8px rgba(255,215,0,0.55); transform:translateY(-4px) }
    100%{ box-shadow:0 0 6px 2px rgba(255,215,0,0.4); transform:translateY(0) }
  }
  @keyframes shineSilver {
    0% { box-shadow:0 0 6px 2px rgba(192,192,192,0.35); transform:translateY(0) }
    50%{ box-shadow:0 0 18px 6px rgba(192,192,192,0.5); transform:translateY(-3px) }
    100%{ box-shadow:0 0 6px 2px rgba(192,192,192,0.35); transform:translateY(0) }
  }
  @keyframes shineBronze {
    0% { box-shadow:0 0 6px 2px rgba(205,127,50,0.28); transform:translateY(0) }
    50%{ box-shadow:0 0 18px 6px rgba(205,127,50,0.45); transform:translateY(-3px) }
    100%{ box-shadow:0 0 6px 2px rgba(205,127,50,0.28); transform:translateY(0) }
  }

  .gold .medal{ background:linear-gradient(135deg,#ffd84d,#ffdf7a); color:#2b2b2b; animation:shineGold 1.6s infinite alternate; }
  .silver .medal{ background:linear-gradient(135deg,#e6e6e6,#cfcfcf); color:#222; animation:shineSilver 1.6s infinite alternate; }
  .bronze .medal{ background:linear-gradient(135deg,#d18a4a,#b87333); color:#111; animation:shineBronze 1.6s infinite alternate; }

  .num{ font-weight:700; min-width:70px; text-align:right; color:#fff }

  /* mobile tweaks */
  @media (max-width:600px){
    .controls{gap:6px}
    .place{width:46px; font-size:14px}
    .medal{width:30px;height:30px;font-size:14px}
    thead th{font-size:13px}
    td{padding:10px}
    /* hide points column on very small */
    @media (max-width:420px){}
  }
  /* small helper row for actions */
  .actions{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-bottom:10px}
  .small{font-size:13px;color:var(--muted);margin-top:6px}
</style>
</head>
<body>
  <header>
    <h1>üèÜ –†–µ–π—Ç–∏–Ω–≥ –≥–æ—Ä–æ–¥–æ–≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞</h1>
    <div class="small">–ö–∞–∫–æ–π –≥–æ—Ä–æ–¥ –±—É–¥–µ—Ç –ø–µ—Ä–≤—ã–º? –ù–∞–º—ã—Å—Ç—ã “õ–æ–ª–¥–∞–Ω –∂—ñ–±–µ—Ä–º–µ“£–¥–µ—Ä –¥–∂–∏–≥–∏!!.</div>
  </header>

  <div class="controls" role="form" aria-label="–î–æ–±–∞–≤–∏—Ç—å –±–∞–ª–ª—ã">
    <select id="city"></select>
    <input id="points" type="number" placeholder="–ë–∞–ª–ª—ã (—Ç–µ–Ω–≥–µ)" min="1" />
    <button id="addBtn">–î–æ–±–∞–≤–∏—Ç—å</button>
    <button id="resetBtn" class="ghost">–°–±—Ä–æ—Å–∏—Ç—å</button>
    <button id="downloadBtn" class="ghost">–≠–∫—Å–ø–æ—Ä—Ç</button>
    <button id="importBtn" class="ghost">–ò–º–ø–æ—Ä—Ç</button>
    <input id="fileInput" type="file" accept="application/json" style="display:none" />
  </div>

  <div class="table-wrap" role="table" aria-label="–†–µ–π—Ç–∏–Ω–≥ –≥–æ—Ä–æ–¥–æ–≤">
    <table>
      <thead>
        <tr>
          <th>–ú–µ—Å—Ç–æ</th>
          <th>–ì–æ—Ä–æ–¥</th>
          <th style="text-align:right;padding-right:18px">–ë–∞–ª–ª—ã</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
  </div>

  <div class="actions small">–ü–æ–¥—Å–∫–∞–∑–∫–∞: –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –±—Ä–∞—É–∑–µ—Ä ‚Äî –æ—á–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è. –î–ª—è OBS —É–∫–∞–∂–∏ —Ñ–∞–π–ª:// –ø—É—Ç—å –∏–ª–∏ —Ö–æ—Å—Ç–∏–Ω–≥.</div>

<script>
/* === –¥–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–æ–≤ === */
const cities = [
 "–ê–±–∞–π","–ê–∫—Å–∞–π","–ê–∫—Å—É","–ê–∫—Å—É-–ê—é–ª—ã","–ê–∫—Ç–∞—É","–ê–∫—Ç–æ–±–µ","–ê–ª–≥–∞","–ê–ª–º–∞—Ç—ã","–ê—Ä–∞–ª","–ê—Ä–∫–∞–ª—ã–∫",
 "–ê—Ä—ã—Å","–ê—Å—Ç–∞–Ω–∞ (—Å—Ç–æ–ª–∏—Ü–∞)","–ê—Ç–∞–≥–∞–π","–ê—Ç–±–∞—Å–∞—Ä","–ê—Ç—ã—Ä–∞—É","–ê—è–≥–æ–∑","–ë–∞–ª—Ö–∞—à","–ë–∞—É—Ç–∏–Ω–æ",
 "–ë–µ–π–Ω–µ—É","–ë–æ—Ä–æ–≤–æ–µ","–ë–æ—Ä–∞–ª–¥–∞–π","–ë—É–ª–∞–µ–≤–æ","–ï—Ä–µ–π–º–µ–Ω—Ç–∞—É","–ï—Å–∏–∫","–ï—Å–∏–ª—å","–ñ–∞–Ω–∞–æ–∑–µ–Ω",
 "–ñ–∞–Ω–∞—Ç–∞—Å","–ñ–∞—Ä–∫–µ–Ω—Ç","–ñ–µ–º","–ñ–µ—Ç—ã—Å–∞–π","–ñ–µ–∑–∫–∞–∑–≥–∞–Ω","–ñ–∏—Ç–∏–∫–∞—Ä–∞","–ö–∞–ø—á–∞–≥–∞–π (–ö–æ–Ω–∞–µ–≤)",
 "–ö–∞—Ä–∞–≥–∞–Ω–¥–∞","–ö–∞—Ä–∞–∂–∞–ª","–ö–∞—Ä–∞—Ç–∞—É","–ö–∞—Ä–∫–∞—Ä–∞–ª–∏–Ω—Å–∫","–ö–µ–Ω—Ç–∞—É","–ö–æ–∫—à–µ—Ç–∞—É","–ö–æ—Å—à—ã",
 "–ö–æ—Å—Ç–∞–Ω–∞–π","–ö—É–ª—å—Å–∞—Ä—ã","–ö—É—Ä—á–∞—Ç–æ–≤","–õ–∏—Å–∞–∫–æ–≤—Å–∫","–ú–∞–º–ª—é—Ç–∫–∞","–ú–∞–∫–∏–Ω—Å–∫","–ú–∞–∫–∞—Ç",
 "–ú–∞—Ö–∞–º–±–µ—Ç","–ü–∞–≤–ª–æ–¥–∞—Ä","–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫","–ü—Ä–∏–æ–∑—ë—Ä—Å–∫","–†–∏–¥–¥–µ—Ä","–†—É–¥–Ω—ã–π","–°–∞—Ä–∞–Ω—å",
 "–°–∞—Ä–∫–∞–Ω–¥","–°–∞—Ä—ã–∞–≥–∞—à","–°–∞—Ç–ø–∞–µ–≤","–°–µ–º–µ–π","–°–µ—Ä–≥–µ–µ–≤–∫–∞","–°—Ç–µ–ø–Ω–æ–≥–æ—Ä—Å–∫","–¢–∞–ª–≥–∞—Ä",
 "–¢–∞–ª–¥—ã–∫–æ—Ä–≥–∞–Ω","–¢–∞—Ä–∞–∑","–¢–µ–∫–µ–ª–∏","–¢–µ–º–∏—Ä","–¢–µ–º–∏—Ä—Ç–∞—É","–¢—É—Ä–∫–µ—Å—Ç–∞–Ω","–£—Ä–∞–ª—å—Å–∫",
 "–£—Å—Ç—å-–ö–∞–º–µ–Ω–æ–≥–æ—Ä—Å–∫","–®–∞–ª–∫–∞—Ä","–®–∞—Ä–¥–∞—Ä–∞","–®–∞—Ö—Ç–∏–Ω—Å–∫","–®–µ–º–æ–Ω–∞–∏—Ö–∞","–®–µ—Ç–ø–µ","–®—É","–®—ã–º–∫–µ–Ω—Ç"
];

/* –∫–ª—é—á –≤ localStorage */
const STORAGE_KEY = "cityScores_v1";

/* –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è scores */
let scores = {};
function initScores(){
  cities.forEach(c=> scores[c]=0);
}

/* –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ localStorage */
function loadData(){
  const raw = localStorage.getItem(STORAGE_KEY);
  if(raw){
    try{
      const parsed = JSON.parse(raw);
      // –µ—Å–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ—Ä–º ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º, –∏–Ω–∞—á–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º
      if(typeof parsed === "object" && parsed !== null){
        // —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –≥–æ—Ä–æ–¥–∞, –æ–±—ä–µ–¥–∏–Ω—è–µ–º
        initScores();
        Object.keys(parsed).forEach(k=>{
          if(k in scores) scores[k] = Number(parsed[k]) || 0;
        });
        return;
      }
    }catch(e){}
  }
  initScores();
}

/* —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ */
function saveData(){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(scores));
}

/* DOM refs */
const citySel = document.getElementById("city");
const pointsInput = document.getElementById("points");
const addBtn = document.getElementById("addBtn");
const resetBtn = document.getElementById("resetBtn");
const tbody = document.getElementById("tbody");
const downloadBtn = document.getElementById("downloadBtn");
const importBtn = document.getElementById("importBtn");
const fileInput = document.getElementById("fileInput");

/* –∑–∞–ø–æ–ª–Ω—è–µ–º —Å–µ–ª–µ–∫—Ç */
function fillSelect(){
  citySel.innerHTML = "";
  cities.forEach(c=>{
    const opt = document.createElement("option");
    opt.value = c;
    opt.textContent = c;
    citySel.appendChild(opt);
  });
}

/* –¥–æ–±–∞–≤–∏—Ç—å –±–∞–ª–ª—ã */
function addPoints(){
  const city = citySel.value;
  const pts = parseInt(pointsInput.value,10);
  if(!city || !pts || pts <= 0){ alert("–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤."); return; }
  scores[city] = (scores[city]||0) + pts;
  pointsInput.value = "";
  saveData();
  updateTable();
}

/* —Å–±—Ä–æ—Å */
function resetScores(){
  if(!confirm("–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ: –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –æ—á–∫–∏ —É –≥–æ—Ä–æ–¥–æ–≤? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.")) return;
  initScores();
  saveData();
  updateTable();
}

/* —ç–∫—Å–ø–æ—Ä—Ç (—Å–∫–∞—á–∞—Ç—å json) */
function exportData(){
  const blob = new Blob([JSON.stringify(scores, null, 2)], {type:"application/json;charset=utf-8"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "city_scores.json";
  document.body.appendChild(a);
  a.click();
  a.remove();
  URL.revokeObjectURL(url);
}

/* –∏–º–ø–æ—Ä—Ç (—Ñ–∞–π–ª) */
function importData(file){
  const reader = new FileReader();
  reader.onload = ()=> {
    try{
      const parsed = JSON.parse(reader.result);
      if(typeof parsed !== "object" || parsed === null){ alert("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞"); return; }
      // –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤
      Object.keys(parsed).forEach(k=>{
        if(k in scores) scores[k] = Number(parsed[k]) || 0;
      });
      saveData();
      updateTable();
      alert("–ò–º–ø–æ—Ä—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω.");
    }catch(e){
      alert("–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: –Ω–µ–≤–µ—Ä–Ω—ã–π JSON.");
    }
  };
  reader.readAsText(file);
}

/* –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI —Ç–∞–±–ª–∏—Ü—ã */
function updateTable(){
  tbody.innerHTML = "";
  const sorted = Object.entries(scores).sort((a,b)=> b[1] - a[1]);
  sorted.forEach(([city, pts], idx)=>{
    const tr = document.createElement("tr");
    // –∫–ª–∞—Å—Å—ã –¥–ª—è —Ç–æ–ø3
    if(idx === 0) tr.classList.add("gold");
    else if(idx === 1) tr.classList.add("silver");
    else if(idx === 2) tr.classList.add("bronze");

    const tdPlace = document.createElement("td");
    tdPlace.className = "place";
    tdPlace.textContent = idx + 1;

    const tdCity = document.createElement("td");
    tdCity.className = "city";
    // medal for top3
    if(idx===0){
      const m = document.createElement("span"); m.className="medal"; m.textContent = "ü•á"; tdCity.appendChild(m);
    }else if(idx===1){
      const m = document.createElement("span"); m.className="medal"; m.textContent = "ü•à"; tdCity.appendChild(m);
    }else if(idx===2){
      const m = document.createElement("span"); m.className="medal"; m.textContent = "ü•â"; tdCity.appendChild(m);
    }else{
      const placeholder = document.createElement("span"); placeholder.style.width="38px"; placeholder.style.display="inline-block"; tdCity.appendChild(placeholder);
    }
    const name = document.createElement("span"); name.textContent = city; name.style.marginLeft = "6px";
    tdCity.appendChild(name);

    const tdPoints = document.createElement("td");
    tdPoints.className = "num";
    tdPoints.textContent = pts;

    tr.appendChild(tdPlace);
    tr.appendChild(tdCity);
    tr.appendChild(tdPoints);
    tbody.appendChild(tr);
  });
}

/* —Å–æ–±—ã—Ç–∏—è */
addBtn.addEventListener("click", addPoints);
pointsInput.addEventListener("keydown", (e)=>{ if(e.key === "Enter") addPoints(); });
resetBtn.addEventListener("click", resetScores);
downloadBtn.addEventListener("click", exportData);
importBtn.addEventListener("click", ()=> fileInput.click());
fileInput.addEventListener("change", (ev)=>{
  const file = ev.target.files && ev.target.files[0];
  if(file) importData(file);
  fileInput.value = "";
});

/* init */
fillSelect();
loadData();
updateTable();

/* expose for console debugging (optional) */
window._scores = scores;
window._save = saveData;
window._reset = resetScores;
</script>
</body>
</html>
